# LaunchDeck

LaunchDeck is a virtual application launcher, macro-pad and automation tool. It allows controlling a PC via a simplified tile-based interface.

This application consists of 5 parts:
- Agent: Electron application running on the host machine that is being controlled by one or more Clients
- Client: Angular PWA/browser application hosted by the Server allowing interaction with an Agent
- Server: ASP.net 6 application that hosts the user interface and acts as a bridge between Clients and the Agent
- Plugins: NodeJS modules that add functionality to the Agent to accomplish tasks made accessible via the Client and Server
- Common: Typescript classes, interfaces and extensions shared by the Agent, Server and Plugins

## Plugins

There are a few plugins provided by the application (these may be delivered separately from the final application):
- DelayPlugin: adds millisecond delays between commands
- HttpPlugin: makes Http calls as commands
- KeyboardPlugin: sends key commands to the host machine
- ProcessPlugin (Windows Only): launches applications
- WyzePlugin: unofficial API to automate Wyze bulbs

## Development

### Dependencies

- dotnet 6 must be installed to build and run the Server
- Node 12+ must be installed to build and run the Client and Agent
- Node-gyp and corresponding build tools for Plugins

### Build and Run

- `npm run start` to build and run the agent

_When the Agent starts, you will be prompted for the Server Address and Agent Code. The Server Address defaults to `http://localhost:5105/` which is the development server when running `npm run server`. The agent code defaults to `1` for dev builds and is generated by the agent for release builds. It is used to connect the agent and clients together._

_The Client and Agent will auto-reconnect to the server on connection loss, though it may take a few seconds._

## Getting Started

### Setup

- Install and run the Agent. When the Agent starts, the Server Address and Agent Code must be set.
  - The Server Address and Agent Code will either have a default value or display the value that was last used.
- Open a browser to the Server Address, typically either (https://launchdeck.davidpaulhamilton.net) or (http://localhost:5105)
  - When prompted for the Agent Code, enter the Agent Code specified when running the Agent.

_The Server Address defaults to (https://launchdeck.davidpaulhamilton.net) or (http://localhost:5105) during development for the local server._

_The Agent Code is generated by the agent or defaults to `1` during development. It is used to connect the agent and clients together._

### About the app

- The app allows the user to configure tiles to perform actions on the agent. Each tile can have a name, icon (Google material icon), color and commands (based on plugins that are loaded).
- There are two sections of tiles, the top can act as basic commands or folders to display related tiles grouped on the bottom. The bottom section displays tiles related to the active tile on the top.
- Tiles on the top can also be activated based on different states on the agent. For example, a process can be related to a tile such that when the process window becomes the active window on the agent host, the tile will become "active".
- Tapping on tiles while not in edit mode will run any commands. If the tile is a top-level tile, it will also show the child tiles grouped below.
- In edit mode, tapping tiles (twice if not active) will open a dialog to edit the tile.
- In sort mode, tapping the right or left arrow on a tile will move it left or right.
- In lock mode, states will not activate tiles, allowing a folder to remain active regardless of activity on the agent.

### UI Layout

- Collapsing menu bar at the top
  - Settings
    - Set background image (currently stored base64 encoded in json)
    - Set plugin-specific settings
    - Displays QR code to connect via phone (if currently accessing localhost, this will not work on the phone)
  - Toggle Edit Mode
  - Toggle Sort Mode
  - Lock active tile
  - Disconnect from Agent
- Main tile area
  - Displays configured tiles
  - Selected tile will show child tiles below
- Child tile area
  - Displays tiles related to the active tile above
